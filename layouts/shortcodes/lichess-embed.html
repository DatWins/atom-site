<!-- Shortcode to do a lichess iframe embed off of a regular lichess URL -->
<!-- Assumes input is of form "https://lichess.org[/study]/r4nd0ml3773rs" -->
{{ $url := urls.Parse (.Get "src") }}
{{ if len (findRE "study" $url.Path) }}
    {{ .Scratch.Set "out" (delimit (slice $url.Scheme "://" $url.Host "/study/embed" (slicestr $url.Path 6) "#" $url.Fragment)  "") }}
{{ else }}
    {{ .Scratch.Set "out" (delimit (slice $url.Scheme "://" $url.Host "/embed" $url.Path "#" $url.Fragment) "") }}
{{ end }}
<iframe width=800 height=495 frameborder=0 src="{{ .Scratch.Get "out" }}"></iframe>